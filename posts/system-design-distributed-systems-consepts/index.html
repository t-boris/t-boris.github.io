<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="System Design. Distributed Systems. Concepts" /><meta property="og:locale" content="en" /><meta name="description" content="Collection of notes related to design of distributed software systems" /><meta property="og:description" content="Collection of notes related to design of distributed software systems" /><link rel="canonical" href="https://blog.tsekinovsky.me/posts/system-design-distributed-systems-consepts/" /><meta property="og:url" content="https://blog.tsekinovsky.me/posts/system-design-distributed-systems-consepts/" /><meta property="og:site_name" content="Info worth sharing" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-01-16T00:00:00+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="System Design. Distributed Systems. Concepts" /><meta name="twitter:site" content="@tboris" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-01-16T00:00:00+00:00","datePublished":"2023-01-16T00:00:00+00:00","description":"Collection of notes related to design of distributed software systems","headline":"System Design. Distributed Systems. Concepts","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.tsekinovsky.me/posts/system-design-distributed-systems-consepts/"},"url":"https://blog.tsekinovsky.me/posts/system-design-distributed-systems-consepts/"}</script><title>System Design. Distributed Systems. Concepts | Info worth sharing</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Info worth sharing"><meta name="application-name" content="Info worth sharing"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.1/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.1/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><title>System Design. Distributed Systems. Concepts | Info worth sharing</title><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="System Design. Distributed Systems. Concepts" /><meta property="og:locale" content="en" /><meta name="description" content="Collection of notes related to design of distributed software systems" /><meta property="og:description" content="Collection of notes related to design of distributed software systems" /><link rel="canonical" href="https://blog.tsekinovsky.me/posts/system-design-distributed-systems-consepts/" /><meta property="og:url" content="https://blog.tsekinovsky.me/posts/system-design-distributed-systems-consepts/" /><meta property="og:site_name" content="Info worth sharing" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-01-16T00:00:00+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="System Design. Distributed Systems. Concepts" /><meta name="twitter:site" content="@tboris" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-01-16T00:00:00+00:00","datePublished":"2023-01-16T00:00:00+00:00","description":"Collection of notes related to design of distributed software systems","headline":"System Design. Distributed Systems. Concepts","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.tsekinovsky.me/posts/system-design-distributed-systems-consepts/"},"url":"https://blog.tsekinovsky.me/posts/system-design-distributed-systems-consepts/"}</script> --><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div class="site-title"> <a href="/">Info worth sharing</a></div><div class="site-subtitle font-italic"></div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/t-boris" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/tboris" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['boris','tsekinovsky.me'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>System Design. Distributed Systems. Concepts</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>System Design. Distributed Systems. Concepts</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1673827200" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jan 16, 2023 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="">Boris Tsekinovsky</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1828 words"> <em>10 min</em> read</span></div></div></div><div class="post-content"><p>This document contains some notes that I took while studying <a href="https://www.educative.io/module/lOn30BIA1wV52NDAg/10370001/4527677663084544">educative.io course</a></p><h1 id="distributed-systems">Distributed Systems</h1><p><strong>Vertical scaling</strong> refers to the approach of scaling a system by adding resources (memory, CPU, disk, etc.) to a single node. Meanwhile, <strong>horizontal scaling</strong> refers to the approach of scaling by adding more nodes to the system.</p><h1 id="scalability">Scalability</h1><blockquote><p>Scalability lets us store and process datasets much larger than what we could with a single machine.</p></blockquote><h2 id="partitioning"><span class="mr-2">Partitioning</span><a href="#partitioning" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><blockquote><p>Partitioning is the process of splitting a dataset into multiple, smaller datasets, and then assigning the responsibility of storing and processing them to different nodes of a distributed system. This allows us to add more nodes to our system and increase the size of the data it can handle.</p></blockquote><ol><li>Vertical Partitioning<li>Horizontal partitioning (<strong>Sharding</strong>)</ol><p><a href="/assets/Pasted%20image%2020230113144612.png" class="popup img-link "><img data-src="/assets/Pasted%20image%2020230113144612.png" alt="" width="400" class="lazyload" data-proofer-ignore></a></p><p>In a <strong>vertically partitioned system</strong>, requests that need to combine data from different tables (i.e., join operations) become less efficient. This is because these requests may now have to access data from multiple nodes.</p><p>In a <strong>horizontally partitioned system</strong>, we can usually avoid accessing data from multiple nodes because all the data for each row is located in the same node. However, we may still need to access data from multiple nodes for requests that are searching for a range of rows that belong to multiple nodes. Another important implication of horizontal partitioning is the potential for loss of transactional semantics.</p><p>There are a lot of different algorithms we can use to perform horizontal partitioning.</p><h3 id="range-partitioning"><span class="mr-2">Range partitioning</span><a href="#range-partitioning" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><strong>Range partitioning</strong> is a technique where we split a dataset into ranges according to the value of a specific attribute. We then store each range in a separate node.</p><p><a href="/assets/Pasted%20image%2020230113145045.png" class="popup img-link "><img data-src="/assets/Pasted%20image%2020230113145045.png" alt="" width="400" class="lazyload" data-proofer-ignore></a></p><h3 id="hash-partitioning"><span class="mr-2">Hash partitioning</span><a href="#hash-partitioning" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><strong>Hash partitioning</strong> is a technique where we apply a hash function to a specific attribute of each row. This results in a number that determines which partition—and, thus, node—this row belongs to.</p><h3 id="consistent-hashing"><span class="mr-2">Consistent hashing</span><a href="#consistent-hashing" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><strong>Consistent hashing</strong> is a partitioning technique that is very similar to hash partitioning, but solves the increased data movement problem caused by hash partitioning.</p><p><a href="/assets/Pasted%20image%2020230113145631.png" class="popup img-link "><img data-src="/assets/Pasted%20image%2020230113145631.png" alt="" width="600" class="lazyload" data-proofer-ignore></a></p><blockquote><p>For further discussion on this concept, feel free to read the Dynamo paper. Another widely-used system that uses consistent hashing is Apache Cassandra.</p></blockquote><h1 id="availability">Availability</h1><p>Availability refers to the ability of the system to remain functional despite failures in parts of it.</p><h2 id="replication"><span class="mr-2">Replication</span><a href="#replication" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Replication is the main technique used in distributed systems to increase availability. It consists of storing the same piece of data in multiple nodes (called replicas) so that if one of them crashes, data is not lost, and requests can be served from the other nodes in the meanwhile.</p><h3 id="pessimistic-replication"><span class="mr-2">Pessimistic replication</span><a href="#pessimistic-replication" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><strong>Pessimistic replication</strong> tries to guarantee from the beginning that all the replicas are identical to each other—as if there was only one copy of the data all along.</p><h3 id="optimistic-replication"><span class="mr-2">Optimistic replication</span><a href="#optimistic-replication" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><strong>Optimistic replication</strong>, or lazy replication, allows the different replicas to diverge. This guarantees that they will converge again if the system does not receive any updates, or enters a quiesced state, for a period of time.</p><h3 id="single-master-replication"><span class="mr-2">Single-master replication</span><a href="#single-master-replication" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Single-master replication is a technique where we designate a single node amongst the replicas as the <strong>leader</strong>, or primary, that receives all the updates.</p><blockquote><p>This technique is also known as <strong>primary-backup replication</strong>.</p></blockquote><p><a href="/assets/Pasted image 20230113150329.png" class="popup img-link "><img data-src="/assets/Pasted image 20230113150329.png" alt="" width="600" class="lazyload" data-proofer-ignore></a></p><h3 id="techniques-for-propagating-updates"><span class="mr-2">Techniques for propagating updates</span><a href="#techniques-for-propagating-updates" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><h4 id="synchronous-replication"><span class="mr-2">Synchronous replication</span><a href="#synchronous-replication" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>In <strong>synchronous replication</strong>, the node replies to the client to indicate the update is complete—only after receiving acknowledgments from the other replicas that they’ve also performed the update on their local storage. This guarantees that the client is able to view the update in a subsequent read after acknowledging it, no matter which replica the client reads from.</p><p><a href="/assets/Pasted image 20230113150518.png" class="popup img-link "><img data-src="/assets/Pasted image 20230113150518.png" alt="" width="500" class="lazyload" data-proofer-ignore></a></p><h4 id="asynchronous-replication"><span class="mr-2">Asynchronous replication</span><a href="#asynchronous-replication" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>In <strong>asynchronous replication</strong>, the node replies to the client as soon as it performs the update in its local storage, without waiting for responses from the other replicas.</p><p><a href="/assets/Pasted image 20230113150614.png" class="popup img-link "><img data-src="/assets/Pasted image 20230113150614.png" alt="" width="500" class="lazyload" data-proofer-ignore></a></p><h3 id="multi-master-replication"><span class="mr-2">Multi-Master Replication</span><a href="#multi-master-replication" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>In this technique, all replicas are equal and can accept write requests. They are also responsible for propagating the data modifications to the rest of the group.</p><h4 id="conflict-resolution"><span class="mr-2">Conflict resolution</span><a href="#conflict-resolution" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>There are many different ways to resolve conflicts, depending on the guarantees the system wants to provide.</p><p>An important aspect of different approaches to resolving conflicts is whether they do it <em>eagerly</em> or <em>lazily</em>.</p><ul><li>In the <strong>eagerly</strong> case, the conflict is resolved during the write operation.<li>In the <strong>lazily</strong> case, the write operation proceeds to maintain multiple, alternative versions of the data record that are eventually resolved to a single version later on, i.e., during a subsequent read operation.</ul><h3 id="quorums-in-distributed-systems"><span class="mr-2">Quorums in Distributed Systems</span><a href="#quorums-in-distributed-systems" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Let’s consider an example. In a system of three replicas, we can say that writes need to complete in two nodes (as a quorum of two), while reads need to retrieve data from two nodes. This way, we can be sure that the reads will read the latest value. This is because at least one of the nodes in the <em>read quorum</em> will also be included in the latest <em>write quorum</em>.</p><h1 id="safety-guarantors-acid">Safety guarantors (ACID)</h1><p><a href="/assets/Pasted image 20230116101619.png" class="popup img-link "><img data-src="/assets/Pasted image 20230116101619.png" alt="" width="400" class="lazyload" data-proofer-ignore></a></p><h2 id="atomicity"><span class="mr-2">Atomicity</span><a href="#atomicity" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>It is challenging to achieve atomicity in a distributed system because of the possibility of <strong>partial failures</strong>. <strong>Atomicity</strong> guarantees that a transaction that comprises multiple operations is treated as a single unit. This means that either <em>all</em> operations of the transaction are executed, or <em>none</em> of them is.</p><h2 id="consistency"><span class="mr-2">Consistency</span><a href="#consistency" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>It is challenging to achieve consistency because of the <strong>network asynchrony</strong>. Network asynchrony occurs when different nodes in a network have different values for the current time. The following illustration shows this. <strong>Consistency</strong> guarantees that a transaction only transitions the database from one valid state to another valid state, while maintaining any database invariants.</p><h2 id="isolation"><span class="mr-2">Isolation</span><a href="#isolation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>It is challenging to achieve isolation because of the inherent concurrency of distributed systems. <strong>Isolation</strong> guarantees that even though transactions might run concurrently and have data dependencies, the result is as if one of them was executed at a time and there was no interference between them.</p><h2 id="durability"><span class="mr-2">Durability</span><a href="#durability" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><strong>Durability</strong> guarantees that once a transaction is committed, it remains committed even in the case of failure. In the context of single-node, centralized systems, this usually means that completed transactions and their effects are recorded in non-volatile storage.</p><h2 id="cap-theorem"><span class="mr-2">CAP Theorem</span><a href="#cap-theorem" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>According to the initial statement of the CAP theorem, it is impossible for a distributed data store to provide more than two of the following properties simultaneously: <strong>consistency</strong>, <strong>availability</strong>, and <strong>partition tolerance</strong>.</p><blockquote><p>a distributed system can be either <em>consistent</em> or <em>available</em> in the presence of a network partition.</p></blockquote><blockquote><p>“In the case of a <em>network partition</em> (P), the system has to choose between <em>availability</em> (A) and <em>consistency</em> (C) but <em>else</em> (E), when the system operates normally in the absence of network partitions, the system has to choose between <em>latency</em> (L) and <em>consistency</em> (C).”</p></blockquote><h3 id="proof"><span class="mr-2">Proof</span><a href="#proof" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><a href="/assets/Pasted image 20230116103259.png" class="popup img-link "><img data-src="/assets/Pasted image 20230116103259.png" alt="" width="400" class="lazyload" data-proofer-ignore></a></p><p>Now, let’s assume that there is a network failure that results in a network partition between the two nodes of the system at some point. A user of the system performs a write, and then a read—even two different users may perform these operations.</p><p>In that case, the system has two options:</p><ul><li>It can fail one of the operations, and break the <em>availability</em> property.<li>It can process both the operations, which will return a stale value from the read and break the <em>consistency</em> property.</ul><h2 id="consistency-model"><span class="mr-2">Consistency Model</span><a href="#consistency-model" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>The consistency model defines the set of execution histories that are valid in a system.</p><h3 id="strong-consistency-model"><span class="mr-2">Strong consistency model</span><a href="#strong-consistency-model" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>The consistency model defines the set of execution histories that are valid in a system.</p><p>Usually, the stronger the consistency model a system satisfies, the easier it is to build an application on top of it. This is because the developer can rely on stricter guarantees.</p><h3 id="list-of-consistency-models"><span class="mr-2">List of consistency models</span><a href="#list-of-consistency-models" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>Linearizability<ul><li>operations appear to be instantaneous to the external client.<li>The <strong>non-linearizability</strong> comes from the use of <em>asynchronous replication</em>.<li>When we use a <em>synchronous replication</em> technique, we make the system linearizable.</ul><li>Sequential Consistency<ul><li><strong>Sequential consistency</strong> is a weaker consistency model, where operations are allowed to take effect before their invocation or after their completion. As a result, it provides no real-time guarantees. However, operations from different clients have to be seen in the same order by all other clients, and operations of every single client preserve the order specified by its program (in this global order).</ul><li>Causal Consistency<ul><li>In some cases, we don’t need to preserve the ordering specified by each client’s program—as long as causally related operations are displayed in the right order. This is the <strong>causal consistency</strong> model, which requires that only operations that are causally related need to be seen in the same order by all the nodes.</ul><li>Eventual Consistency<ul><li>There are still even simpler applications that do not have the notion of a cause-and-effect and require an even simpler consistency model. The <strong>eventual consistency</strong> model is beneficial here.</ul></ul><h2 id="isolation-levels-and-anomalies"><span class="mr-2">Isolation Levels and Anomalies</span><a href="#isolation-levels-and-anomalies" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>There is still a need for some formal models that define what is possible and what is not in a system’s behavior. These are called <strong>isolation levels</strong></p><ul><li><strong>Serializability:</strong> It essentially states that two transactions, when executed concurrently, should give the same result as though executed sequentially.<li><strong>Repeatable read:</strong> It ensures that the data once read by a transaction will not change throughout its course.<li><strong>Snapshot isolation:</strong> It guarantees that all reads made in a transaction see a consistent snapshot of the database from the point it started and till the transaction commits successfully if no other transaction has updated the same data since that snapshot.<li><strong>Read committed:</strong> It does not allow transactions to read data that has not yet been committed by another transaction.<li><strong>Read uncommitted:</strong> It is the lowest isolation level and allows the transaction to read uncommitted data by other transactions.</ul><h3 id="anomaly-dirty-write"><span class="mr-2">Anomaly: Dirty write</span><a href="#anomaly-dirty-write" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>A <strong>dirty write</strong> occurs when a transaction overwrites a value that was previously written by another transaction that is still in-flight and has not been committed yet.</p><h3 id="anomaly-dirty-read"><span class="mr-2">Anomaly: Dirty read</span><a href="#anomaly-dirty-read" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>A <strong>dirty read</strong> occurs when a transaction reads a value that has been written by another transaction that has not yet been committed.</p><h3 id="anomaly-fuzzy-or-non-repeatable-read"><span class="mr-2">Anomaly: Fuzzy or non-repeatable read</span><a href="#anomaly-fuzzy-or-non-repeatable-read" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>A <strong>fuzzy or non-repeatable read</strong> occurs when a value is retrieved twice during a transaction (without it being updated in the same transaction), and the value is different.</p><h3 id="anomaly-phantom-read"><span class="mr-2">Anomaly: Phantom read</span><a href="#anomaly-phantom-read" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>A <strong>phantom read</strong> occurs when a transaction does a predicate-based read, and another transaction writes or removes a data item matched by that predicate while the first transaction is still in flight. If that happens, then the first transaction might be acting again on stale data or inconsistent data.</p><h3 id="anomaly-lost-update"><span class="mr-2">Anomaly: Lost update</span><a href="#anomaly-lost-update" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>A <strong>lost update</strong> occurs when two transactions read the same value and then try to update it to two different values. The end result is that one of the two updates survives, but the process executing the other update is not informed that its update did not take effect. Thus it is called a lost update.</p><h3 id="anomaly-read-skew"><span class="mr-2">Anomaly: Read skew</span><a href="#anomaly-read-skew" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>A <strong>read skew</strong> occurs when there are integrity constraints between two data items that seem to be violated because a transaction can only see partial results of another transaction.</p><p><a href="/assets/Pasted image 20230116112650.png" class="popup img-link "><img data-src="/assets/Pasted image 20230116112650.png" alt="" width="400" class="lazyload" data-proofer-ignore></a></p><h3 id="anomaly-write-skew"><span class="mr-2">Anomaly: Write skew</span><a href="#anomaly-write-skew" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>A <strong>write skew</strong> occurs when two transactions read the same data, but then modify disjoint sets of data.</p><p><a href="/assets/Pasted image 20230116112923.png" class="popup img-link "><img data-src="/assets/Pasted image 20230116112923.png" alt="" width="400" class="lazyload" data-proofer-ignore></a></p><p><a href="/assets/Pasted image 20230116120348.png" class="popup img-link "><img data-src="/assets/Pasted image 20230116120348.png" alt="" class="lazyload" data-proofer-ignore></a></p><h2 id="models"><span class="mr-2">Models</span><a href="#models" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><a href="/assets/Pasted image 20230116120900.png" class="popup img-link "><img data-src="/assets/Pasted image 20230116120900.png" alt="" class="lazyload" data-proofer-ignore></a></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/system-design/'>system-design</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/cs/" class="post-tag no-text-decoration" >cs</a> <a href="/tags/system-design/" class="post-tag no-text-decoration" >system-design</a> <a href="/tags/notes/" class="post-tag no-text-decoration" >notes</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=System Design. Distributed Systems. Concepts - Info worth sharing&url=https%3A%2F%2Fblog.tsekinovsky.me%2Fposts%2Fsystem-design-distributed-systems-consepts%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=System Design. Distributed Systems. Concepts - Info worth sharing&u=https%3A%2F%2Fblog.tsekinovsky.me%2Fposts%2Fsystem-design-distributed-systems-consepts%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fblog.tsekinovsky.me%2Fposts%2Fsystem-design-distributed-systems-consepts%2F&text=System Design. Distributed Systems. Concepts - Info worth sharing" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/cs/">cs</a> <a class="post-tag" href="/tags/eks/">eks</a> <a class="post-tag" href="/tags/elk/">elk</a> <a class="post-tag" href="/tags/github/">github</a> <a class="post-tag" href="/tags/home-assistant/">home-assistant</a> <a class="post-tag" href="/tags/jekyll/">jekyll</a> <a class="post-tag" href="/tags/k8s/">k8s</a> <a class="post-tag" href="/tags/notes/">notes</a> <a class="post-tag" href="/tags/smarthome/">smarthome</a> <a class="post-tag" href="/tags/system-design/">system-design</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/elk-on-eks/"><div class="card-body"> <em class="small" data-ts="1674518400" data-df="ll" > Jan 24, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>ELK on EKS cluster</h3><div class="text-muted small"><p> Introduction This post provides instructions for setting up EKS kubernetes cluster with Elastic stack. One of my projects required deployment to kubernetes cluster and since this was a new projec...</p></div></div></a></div><div class="card"> <a href="/posts/homeassistant-garage-opener/"><div class="card-body"> <em class="small" data-ts="1673395200" data-df="ll" > Jan 11, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Garage door opener with Home Assistant</h3><div class="text-muted small"><p> Problem definition Recently I got a new interest - home automation. This is very broad topic that could require a whole book or a web site. Here I’d like to tell you only the story of automating m...</p></div></div></a></div><div class="card"> <a href="/posts/setup-personalized-blog-with-jekyll/"><div class="card-body"> <em class="small" data-ts="1673308800" data-df="ll" > Jan 10, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Blog with GitHub Pages and Jekyll</h3><div class="text-muted small"><p> Introduction Though it’s very controversial statement, I believe, we all should have a place in the ocean of the Internet. After some contemplation period I came to a conclusion that I need: P...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/homeassistant-garage-opener/" class="btn btn-outline-primary" prompt="Older"><p>Garage door opener with Home Assistant</p></a> <a href="/posts/elk-on-eks/" class="btn btn-outline-primary" prompt="Newer"><p>ELK on EKS cluster</p></a></div><div id="disqus_thread" class="pt-2 pb-2"><p class="text-center text-muted small"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script type="text/javascript"> var disqus_config = function () { this.page.url = 'https://blog.tsekinovsky.me/posts/system-design-distributed-systems-consepts/'; this.page.identifier = '/posts/system-design-distributed-systems-consepts/'; }; /* Lazy loading */ var disqus_observer = new IntersectionObserver(function (entries) { if(entries[0].isIntersecting) { (function () { var d = document, s = d.createElement('script'); s.src = 'https://blog-tsekinovsky-me.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); disqus_observer.disconnect(); } }, { threshold: [0] }); disqus_observer.observe(document.querySelector('#disqus_thread')); /* Auto switch theme */ function reloadDisqus() { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* Disqus hasn't been loaded */ if (typeof DISQUS === "undefined") { return; } if (document.readyState == 'complete') { DISQUS.reset({ reload: true, config: disqus_config }); } } } const modeToggle = document.querySelector(".mode-toggle"); if (typeof modeToggle !== "undefined") { window.addEventListener("message", reloadDisqus); } </script></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/cs/">cs</a> <a class="post-tag" href="/tags/eks/">eks</a> <a class="post-tag" href="/tags/elk/">elk</a> <a class="post-tag" href="/tags/github/">github</a> <a class="post-tag" href="/tags/home-assistant/">home-assistant</a> <a class="post-tag" href="/tags/jekyll/">jekyll</a> <a class="post-tag" href="/tags/k8s/">k8s</a> <a class="post-tag" href="/tags/notes/">notes</a> <a class="post-tag" href="/tags/smarthome/">smarthome</a> <a class="post-tag" href="/tags/system-design/">system-design</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><footer><div class="container pl-lg-4 pr-lg-4"><div class="d-flex justify-content-between align-items-center text-muted ml-md-3 mr-md-3"><div class="footer-left"><p class="mb-0"> © 2023 <a href="">Boris Tsekinovsky</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0">Using the <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> theme <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a>.</p></div></div></div></footer><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1.1.0/dist/jquery.magnific-popup.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1.11.6/dayjs.min.js,npm/dayjs@1.11.6/locale/en.min.js,npm/dayjs@1.11.6/plugin/relativeTime.min.js,npm/dayjs@1.11.6/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-YCZXJ9FFBL"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-YCZXJ9FFBL'); }); </script>
