<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en"><generator uri="https://jekyllrb.com/" version="4.3.4">Jekyll</generator><link href="https://blog.tsekinovsky.me/feed.xml" rel="self" type="application/atom+xml" /><link href="https://blog.tsekinovsky.me/" rel="alternate" type="text/html" hreflang="en" /><updated>2025-11-29T06:12:50-06:00</updated><id>https://blog.tsekinovsky.me/feed.xml</id><title type="html">Info worth sharing</title><subtitle>Personal blog</subtitle><entry><title type="html">Finding My Voice in Russian Poetry</title><link href="https://blog.tsekinovsky.me/posts/finding-my-voice-in-russian-poetry/" rel="alternate" type="text/html" title="Finding My Voice in Russian Poetry" /><published>2025-11-28T23:00:00-06:00</published><updated>2025-11-29T05:19:17-06:00</updated><id>https://blog.tsekinovsky.me/posts/finding-my-voice-in-russian-poetry</id><content type="html" xml:base="https://blog.tsekinovsky.me/posts/finding-my-voice-in-russian-poetry/"><![CDATA[<p>Lately I have been doing something I did not expect to enjoy this much:
recording Russian poetry and turning it into small video clips.</p>

<p>The poems are in Russian, but I want to share the story here in English to
document the process and remind myself that a simple microphone experiment can
grow into a creative project.</p>

<hr />

<h2 id="it-all-started-with-a-microphone">It All Started With a Microphone</h2>

<p>The whole thing began very simply: I bought an Audio-Technica <strong>AT2035</strong>.</p>

<p>It is a condenser mic, not some crazy high-end studio monster, but a solid,
reliable piece of gear. I plugged it in, set it up, and started reading Russian
poems out loud. No big production plan, no long-term strategy. Just me, my
voice, and the text.</p>

<p>To my surprise, I liked how it sounded. The AT2035 gave the voice enough warmth
and clarity that I actually wanted to keep listening to my own recordings.
Usually you hear yourself on tape and think, “Do I really sound like that?” This
time I thought, “Okay… this I can work with.”</p>

<hr />

<h2 id="recording-russian-poems">Recording Russian Poems</h2>

<p>Most of what I recorded were Russian poems that mean something to me, including
several by <strong>Joseph Brodsky</strong>.</p>

<p>There is a particular feeling in reading Brodsky out loud. His rhythm is sharp,
almost architectural. When you speak it, you do not just say the poem; you walk
through it, like a space built out of words. The microphone just captures that
walk.</p>

<p>A typical recording session looked like this:</p>

<ul>
  <li>Choose a poem (often Brodsky).</li>
  <li>Read it silently a few times to catch the rhythm and intonation.</li>
  <li>Hit record and read it out loud.</li>
  <li>Stop, listen, hate something, re-record.</li>
  <li>Repeat until the voice feels honest and not theatrical.</li>
</ul>

<p>No studio, no special room treatment. Just a basic home setup, a condenser mic,
and a bit of stubbornness.</p>

<hr />

<h2 id="from-audio-to-video-turning-poems-into-clips">From Audio to Video: Turning Poems Into Clips</h2>

<p>Pretty quickly, just having audio was not enough. I wanted to <strong>see</strong> the poem.</p>

<p>So I started building <strong>video clips</strong> around my voice recordings. Instead of
heavy manual editing for every single frame, I leaned on modern tools that can
generate or enhance visuals from text and ideas. The goal was not to make
perfect cinema, but to create visual atmospheres that match the emotional tone
of each poem.</p>

<p>That is how the audio experiment turned into a series of short video clips to
Russian poetry, especially to Brodsky.</p>

<hr />

<h2 id="the-tools-i-used-genspark-grok-and-veo-31">The Tools I Used: GenSpark, Grok, and Veo 3.1</h2>

<p>To create the visual part, I played with different systems:</p>

<h3 id="gensparkai">GenSpark.ai</h3>

<p>For a good portion of the work, I used <strong>GenSpark.ai</strong>.</p>

<p>I would describe the mood of the poem, the setting, the feeling, and let the
system propose visuals. Sometimes it nailed it from the first attempt. Sometimes
I had to iterate a bit, refining prompts until the video felt closer to the
poem.</p>

<p>GenSpark was useful for building those poetic scenes: foggy streets, abstract
reflections, lonely rooms, and small visual metaphors that do not scream but
quietly resonate with the voice.</p>

<h3 id="grok">Grok</h3>

<p>From time to time, I also used <strong>Grok</strong>. It did not replace anything; it gave me
a second opinion. Another angle, another interpretation. Sometimes Grok’s
output was rougher, sometimes unexpectedly bold, and that helped me escape from
repeating the same visual pattern.</p>

<h3 id="veo-31-google">Veo 3.1 (Google)</h3>

<p>And then there is <strong>Veo 3.1</strong> from Google.</p>

<p>This one I used directly, often when I wanted something more cinematic or fluid.
Veo is less about static nice frames and more about motion, transitions, and the
feeling that the image is alive.</p>

<p>For certain poems, that movement mattered a lot, especially when the text deals
with time, memory, or inner change. You read a line, and you want the image not
just to sit there, but to slowly transform with the meaning.</p>

<hr />

<h2 id="what-came-out-of-it">What Came Out of It</h2>

<p>In the end, I ended up with:</p>

<ul>
  <li>Several voice recordings of Russian poems, including Brodsky.</li>
  <li>A set of video clips where my voice and the generated visuals live together.</li>
  <li>A process that is technically simple but emotionally rich.</li>
</ul>

<p>The combination that works for me:</p>

<ul>
  <li>The voice: human, personal, slightly imperfect.</li>
  <li>The text: strong, time-tested poetry in Russian.</li>
  <li>The visuals: built with help from AI tools like GenSpark.ai, Grok, and Veo
3.1.</li>
</ul>

<p>It feels like a collaboration between three layers: the poet, the reader, and
the machine.</p>

<hr />

<h2 id="watch-the-clips-on-youtube">Watch the Clips on YouTube</h2>

<p>Here are some of the videos that came out of this experiment:</p>

<div style="position:relative;padding-bottom:56.25%;height:0;overflow:hidden;max-width:100%;">
  <iframe style="position:absolute;top:0;left:0;width:100%;height:100%;" src="https://www.youtube-nocookie.com/embed/o6filDUjmF8" title="Russian poetry clip 1" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen=""></iframe>
</div>

<div style="position:relative;padding-bottom:56.25%;height:0;overflow:hidden;max-width:100%;margin-top:1rem;">
  <iframe style="position:absolute;top:0;left:0;width:100%;height:100%;" src="https://www.youtube-nocookie.com/embed/byVUWekDfgM?start=21" title="Russian poetry clip 2" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen=""></iframe>
</div>

<div style="position:relative;padding-bottom:56.25%;height:0;overflow:hidden;max-width:100%;margin-top:1rem;">
  <iframe style="position:absolute;top:0;left:0;width:100%;height:100%;" src="https://www.youtube-nocookie.com/embed/uhV7WH7RiG8" title="Russian poetry clip 3" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen=""></iframe>
</div>

<p>Each combines my reading of Russian poetry with visuals generated using the
tools above. They are different in mood but come from the same simple idea: give
the poem a voice and a moving image.</p>

<hr />

<h2 id="why-this-matters-to-me">Why This Matters to Me</h2>

<p>This project reminded me of a few things:</p>

<ul>
  <li>You do not need a huge plan to start a meaningful creative experiment.
Sometimes you just buy a microphone and read a poem.</li>
  <li>Modern tools do not kill creativity; they shift it. Less time goes to
technical grind, more to choosing mood, rhythm, and meaning.</li>
  <li>Working with poetry in your own voice is therapeutic. You hear how you handle
silence, pauses, tension, and it tells you a lot about yourself.</li>
</ul>

<p>I am not pretending this is a giant art project. It is a small, honest practice:
taking Russian poems I love, reading them into a good microphone, and letting
modern tools help wrap them in visuals. For now, that is enough. The rest will
grow from there.</p>]]></content><author><name></name></author><category term="creative" /><category term="poetry" /><category term="audio" /><category term="video" /><category term="ai-tools" /><category term="brodsky" /><category term="workflow" /><summary type="html"><![CDATA[Recording Russian poems with a condenser mic and pairing them with AI-generated visuals turned a small audio experiment into a mini video series.]]></summary></entry><entry><title type="html">ELK on EKS cluster</title><link href="https://blog.tsekinovsky.me/posts/elk-on-eks/" rel="alternate" type="text/html" title="ELK on EKS cluster" /><published>2023-01-24T00:00:00-06:00</published><updated>2023-01-24T00:00:00-06:00</updated><id>https://blog.tsekinovsky.me/posts/elk-on-eks</id><content type="html" xml:base="https://blog.tsekinovsky.me/posts/elk-on-eks/"><![CDATA[<h1 id="introduction">Introduction</h1>

<p>This post provides instructions for setting up EKS kubernetes cluster with Elastic stack.</p>

<p>One of my projects required deployment to kubernetes cluster and since this was a new project I decided to do it completely in the cloud. So my obvious choice was EKS from AWS as a main provider of cloud technology. My next task was to set up cross-cutting concerns for the application. First default requirement was setting up logging system. I decided to use Elastic search with Kibana for this purpose.</p>

<p>The following post contains steps that I did to generate such environment</p>

<h1 id="eks">EKS</h1>

<p>I decided to use CDK in order to manipulate my AWS environment. Prerequisites for the CDK are:</p>
<ul>
  <li>AWS Account</li>
  <li><a href="https://aws.amazon.com/cli/">AWS CLI</a></li>
  <li><a href="https://docs.aws.amazon.com/cdk/v2/guide/cli.html">CDK CLI</a></li>
</ul>

<p>In order to generate CDK project type (I decided to use go version of the tool)</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>cdk init app <span class="nt">--language</span> go
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Modify <code class="language-plaintext highlighter-rouge">app.go</code></p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
</pre></td><td class="rouge-code"><pre><span class="k">package</span> <span class="n">main</span>  
  
<span class="k">import</span> <span class="p">(</span>  
   <span class="s">"github.com/aws/aws-cdk-go/awscdk/v2"</span>  
   <span class="s">"github.com/aws/aws-cdk-go/awscdk/v2/awsautoscaling"</span>   
   <span class="s">"github.com/aws/aws-cdk-go/awscdk/v2/awsec2"</span>   
   <span class="s">"github.com/aws/aws-cdk-go/awscdk/v2/awseks"</span>   
   <span class="s">"github.com/aws/aws-cdk-go/awscdk/v2/awsiam"</span>   
   <span class="s">"github.com/aws/aws-sdk-go-v2/aws"</span>   
   <span class="s">"github.com/aws/constructs-go/constructs/v10"</span>   
   <span class="s">"github.com/aws/jsii-runtime-go"</span><span class="p">)</span>  
  
<span class="k">type</span> <span class="n">AwsStackProps</span> <span class="k">struct</span> <span class="p">{</span>  
   <span class="n">awscdk</span><span class="o">.</span><span class="n">StackProps</span>  
<span class="p">}</span>  
  
<span class="k">func</span> <span class="n">NewAwsStack</span><span class="p">(</span><span class="n">scope</span> <span class="n">constructs</span><span class="o">.</span><span class="n">Construct</span><span class="p">,</span> <span class="n">id</span> <span class="kt">string</span><span class="p">,</span> <span class="n">props</span> <span class="o">*</span><span class="n">AwsStackProps</span><span class="p">)</span> <span class="n">awscdk</span><span class="o">.</span><span class="n">Stack</span> <span class="p">{</span>  
	<span class="k">var</span> <span class="n">sprops</span> <span class="n">awscdk</span><span class="o">.</span><span class="n">StackProps</span>  
	<span class="k">if</span> <span class="n">props</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>  
      <span class="n">sprops</span> <span class="o">=</span> <span class="n">props</span><span class="o">.</span><span class="n">StackProps</span>  
	<span class="p">}</span>  
	<span class="n">stack</span> <span class="o">:=</span> <span class="n">awscdk</span><span class="o">.</span><span class="n">NewStack</span><span class="p">(</span><span class="n">scope</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">id</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sprops</span><span class="p">)</span>  
  
   <span class="c">// Create VPC  </span>
	<span class="n">vpc</span> <span class="o">:=</span> <span class="n">awsec2</span><span class="o">.</span><span class="n">NewVpc</span><span class="p">(</span><span class="n">stack</span><span class="p">,</span> <span class="n">aws</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="s">"my-vpc"</span><span class="p">),</span> <span class="o">&amp;</span><span class="n">awsec2</span><span class="o">.</span><span class="n">VpcProps</span><span class="p">{})</span>  
  
   <span class="c">// IAM role for our EC2 worker nodes  </span>
	<span class="n">workerRole</span> <span class="o">:=</span> <span class="n">awsiam</span><span class="o">.</span><span class="n">NewRole</span><span class="p">(</span><span class="n">stack</span><span class="p">,</span> <span class="n">jsii</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="s">"EKSWorkerRole"</span><span class="p">),</span> <span class="o">&amp;</span><span class="n">awsiam</span><span class="o">.</span><span class="n">RoleProps</span><span class="p">{</span>  
      <span class="n">AssumedBy</span><span class="o">:</span> <span class="n">awsiam</span><span class="o">.</span><span class="n">NewServicePrincipal</span><span class="p">(</span><span class="n">jsii</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="s">"ec2.amazonaws.com"</span><span class="p">),</span> <span class="no">nil</span><span class="p">),</span>  
   <span class="p">})</span>  
  
   <span class="c">// Create Kubernetes cluster  </span>
	<span class="n">cluster</span> <span class="o">:=</span> <span class="n">awseks</span><span class="o">.</span><span class="n">NewCluster</span><span class="p">(</span><span class="n">stack</span><span class="p">,</span> <span class="n">jsii</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="s">"my-cluster"</span><span class="p">),</span> <span class="o">&amp;</span><span class="n">awseks</span><span class="o">.</span><span class="n">ClusterProps</span><span class="p">{</span>  
      <span class="n">ClusterName</span><span class="o">:</span>             <span class="n">jsii</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="s">"my-cluster"</span><span class="p">),</span>  
      <span class="n">Vpc</span><span class="o">:</span>                     <span class="n">vpc</span><span class="p">,</span>  
      <span class="n">Version</span><span class="o">:</span>                 <span class="n">awseks</span><span class="o">.</span><span class="n">KubernetesVersion_V1_24</span><span class="p">(),</span>  
      <span class="n">DefaultCapacityInstance</span><span class="o">:</span> <span class="n">awsec2</span><span class="o">.</span><span class="n">InstanceType_Of</span><span class="p">(</span><span class="n">awsec2</span><span class="o">.</span><span class="n">InstanceClass_T3</span><span class="p">,</span> <span class="n">awsec2</span><span class="o">.</span><span class="n">InstanceSize_MEDIUM</span><span class="p">),</span>  
   <span class="p">})</span>  
  
	<span class="n">onDemandASG</span> <span class="o">:=</span> <span class="n">awsautoscaling</span><span class="o">.</span><span class="n">NewAutoScalingGroup</span><span class="p">(</span><span class="n">stack</span><span class="p">,</span> <span class="n">jsii</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="s">"OnDemandASG"</span><span class="p">),</span> <span class="o">&amp;</span><span class="n">awsautoscaling</span><span class="o">.</span><span class="n">AutoScalingGroupProps</span><span class="p">{</span>  
      <span class="n">Vpc</span><span class="o">:</span>          <span class="n">vpc</span><span class="p">,</span>  
      <span class="n">Role</span><span class="o">:</span>         <span class="n">workerRole</span><span class="p">,</span>  
      <span class="n">MinCapacity</span><span class="o">:</span>  <span class="n">jsii</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="m">1</span><span class="p">),</span>  
      <span class="n">MaxCapacity</span><span class="o">:</span>  <span class="n">jsii</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="m">10</span><span class="p">),</span>  
      <span class="n">InstanceType</span><span class="o">:</span> <span class="n">awsec2</span><span class="o">.</span><span class="n">NewInstanceType</span><span class="p">(</span><span class="n">jsii</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="s">"t3.medium"</span><span class="p">)),</span>  
      <span class="n">MachineImage</span><span class="o">:</span> <span class="n">awseks</span><span class="o">.</span><span class="n">NewEksOptimizedImage</span><span class="p">(</span><span class="o">&amp;</span><span class="n">awseks</span><span class="o">.</span><span class="n">EksOptimizedImageProps</span><span class="p">{</span>  
         <span class="n">KubernetesVersion</span><span class="o">:</span> <span class="n">jsii</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="s">"1.24"</span><span class="p">),</span>  
         <span class="n">NodeType</span><span class="o">:</span>          <span class="n">awseks</span><span class="o">.</span><span class="n">NodeType_STANDARD</span><span class="p">,</span>  
      <span class="p">}),</span>  
   <span class="p">})</span>  
  
	<span class="n">cluster</span><span class="o">.</span><span class="n">ConnectAutoScalingGroupCapacity</span><span class="p">(</span><span class="n">onDemandASG</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">awseks</span><span class="o">.</span><span class="n">AutoScalingGroupOptions</span><span class="p">{})</span>
	
	<span class="k">return</span> <span class="n">stack</span>  
<span class="p">}</span>

<span class="o">...</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>I configured the cluster to use t3.medium boxes for control plane and for worker nodes.</p>

<h2 id="deployment">Deployment</h2>

<p>Prerequisites for this part is:</p>
<ul>
  <li><a href="https://docs.aws.amazon.com/eks/latest/userguide/eksctl.html">eksctl</a></li>
  <li><a href="https://helm.sh/docs/intro/install/">helm</a> version 3+</li>
</ul>

<h3 id="deploy-eks-cluster">Deploy EKS cluster</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>cdk deploy
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Deployment of the cluster could take 15 minutes. After that you should register context in kubernetes <code class="language-plaintext highlighter-rouge">aws eks update-kubeconfig --region us-east-1 --name my-cluster --role-arn &lt;role arn&gt;</code></p>

<p>Example:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>aws eks update-kubeconfig <span class="nt">--name</span> my-cluster <span class="nt">--region</span> us-east-1 <span class="nt">--role-arn</span> arn:aws:iam::11111111111:role/AwsStack-myclusterMastersRoleA2A674AE-1K40LT54NLBLL
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="create-odic-provider-for-the-cluster">Create ODIC provider for the cluster</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>eksctl utils associate-iam-oidc-provider <span class="nt">--cluster</span><span class="o">=</span>my-cluster <span class="nt">--region</span> us-east-1 <span class="nt">--approve</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="add-amazon-ebs-csi-driver">Add Amazon EBS CSI driver</h3>

<p>Elasticsearch uses local storage and Kubernetes cluster need a driver to connect to EBS. Basically you need to install addon - EBS CSI driver</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre>eksctl create iamserviceaccount <span class="se">\ </span> 
	<span class="nt">--name</span> ebs-csi-controller-sa <span class="se">\ </span> 
	<span class="nt">--namespace</span> kube-system <span class="se">\ </span> 
	<span class="nt">--cluster</span> my-cluster <span class="se">\ </span> 
	<span class="nt">--attach-policy-arn</span> arn:aws:iam::aws:policy/service-role/AmazonEBSCSIDriverPolicy <span class="se">\ </span> 
	<span class="nt">--approve</span> <span class="se">\ </span> 
	<span class="nt">--role-only</span> <span class="se">\ </span> 
	<span class="nt">--role-name</span> AmazonEKS_EBS_CSI_DriverRole

   
eksctl create addon <span class="nt">--name</span> aws-ebs-csi-driver <span class="nt">--cluster</span> my-cluster <span class="nt">--service-account-role-arn</span> arn:aws:iam::111111111111:role/AmazonEKS_EBS_CSI_DriverRole <span class="nt">--force</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="create-ebs-storage-class">Create EBS Storage Class</h3>

<p>Create file <code class="language-plaintext highlighter-rouge">storage-class.yaml</code> with content</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="na">kind</span><span class="pi">:</span> <span class="s2">"</span><span class="s">StorageClass"</span>  
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s2">"</span><span class="s">storage.k8s.io/v1"</span>  
<span class="na">metadata</span><span class="pi">:</span>  
  <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">standard"</span>  
  <span class="na">annotations</span><span class="pi">:</span>    
<span class="err">	</span>  <span class="na">storageclass.kubernetes.io/is-default-class</span><span class="pi">:</span> <span class="s2">"</span><span class="s">true"</span>
<span class="na">provisioner</span><span class="pi">:</span> <span class="s2">"</span><span class="s">kubernetes.io/aws-ebs"</span>  
<span class="na">parameters</span><span class="pi">:</span>  
  <span class="na">type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">gp2"</span>  
  <span class="na">fsType</span><span class="pi">:</span> <span class="s2">"</span><span class="s">ext4"</span>  
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Apply the yaml file with kubectl</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>kubectl apply <span class="nt">-f</span> storage-class.yaml
</pre></td></tr></tbody></table></code></pre></div></div>

<h1 id="elk">ELK</h1>

<p>Add elastic repository and create namespace for the ELK</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>helm repo add elastic https://helm.elastic.co
helm repo update  
kubectl create namespace monitoring
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="elasticsearch">Elasticsearch</h2>

<p>Create file <code class="language-plaintext highlighter-rouge">values.yaml</code> with content:</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre></td><td class="rouge-code"><pre><span class="nn">---</span>  
<span class="c1"># Permit co-located instances for solitary minikube virtual machines.  </span>
<span class="na">antiAffinity</span><span class="pi">:</span> <span class="s2">"</span><span class="s">soft"</span>  
  
<span class="c1"># Shrink default JVM heap.  </span>
<span class="na">esJavaOpts</span><span class="pi">:</span> <span class="s2">"</span><span class="s">-Xmx512m</span><span class="nv"> </span><span class="s">-Xms512m"</span>  
  
<span class="c1"># Allocate smaller chunks of memory per pod.  </span>
<span class="na">resources</span><span class="pi">:</span>  
  <span class="na">requests</span><span class="pi">:</span>    
<span class="err">	</span>  <span class="na">cpu</span><span class="pi">:</span> <span class="s2">"</span><span class="s">100m"</span>    
<span class="err">	</span>  <span class="na">memory</span><span class="pi">:</span> <span class="s2">"</span><span class="s">1Gi"</span>  
  <span class="na">limits</span><span class="pi">:</span>    
<span class="err">	</span>  <span class="na">cpu</span><span class="pi">:</span> <span class="s2">"</span><span class="s">1000m"</span>    
<span class="err">	</span>  <span class="na">memory</span><span class="pi">:</span> <span class="s2">"</span><span class="s">1Gi"</span>  
<span class="c1"># Request smaller persistent volumes.  </span>
<span class="na">volumeClaimTemplate</span><span class="pi">:</span>  
  <span class="na">accessModes</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="s">ReadWriteOnce"</span> <span class="pi">]</span>  
  <span class="na">storageClassName</span><span class="pi">:</span> <span class="s2">"</span><span class="s">standard"</span>  
  <span class="na">resources</span><span class="pi">:</span>    
<span class="err">	</span><span class="na">requests</span><span class="pi">:</span>
<span class="err">		</span><span class="na">storage</span><span class="pi">:</span> <span class="s">10Gi</span>  
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Install elastic</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>helm <span class="nb">install </span>elasticsearch elastic/elasticsearch <span class="nt">-n</span> monitoring <span class="nt">-f</span> values.yaml <span class="nt">--set</span> <span class="nv">replicas</span><span class="o">=</span>1
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="kibana">Kibana</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>helm <span class="nb">install </span>kibana elastic/kibana <span class="nt">-n</span> monitoring <span class="nt">--set</span> <span class="nv">replicas</span><span class="o">=</span>1
</pre></td></tr></tbody></table></code></pre></div></div>

<p>You’ll be able to connect to Kibana with <code class="language-plaintext highlighter-rouge">elastic</code> username. In order to get password run the following command:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>kubectl get secrets <span class="nt">--namespace</span><span class="o">=</span>monitoring elasticsearch-master-credentials <span class="nt">-ojsonpath</span><span class="o">=</span><span class="s1">'{.data.password}'</span> | <span class="nb">base64</span> <span class="nt">-d</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="usage">Usage</h3>

<p>In order to get access to Kibana run the following commend in a separate window:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>kubectl port-forward deployment/kibana-kibana 5601 <span class="nt">-n</span> monitoring
</pre></td></tr></tbody></table></code></pre></div></div>

<p>After that you can access your cluster through Kibana by URL http://localhost:5601</p>

<p>Credentials are <strong>elastic</strong> and password could be obtained as described above</p>

<p>Hope it helped somebody…</p>]]></content><author><name></name></author><category term="devops" /><category term="k8s" /><category term="eks" /><category term="elk" /><summary type="html"><![CDATA[Tutorial for setting up a EKS cluster with ELK stack in it]]></summary></entry><entry><title type="html">System Design. Distributed Systems. Concepts</title><link href="https://blog.tsekinovsky.me/posts/system-design-distributed-systems-consepts/" rel="alternate" type="text/html" title="System Design. Distributed Systems. Concepts" /><published>2023-01-16T00:00:00-06:00</published><updated>2023-01-16T00:00:00-06:00</updated><id>https://blog.tsekinovsky.me/posts/system-design-distributed-systems-consepts</id><content type="html" xml:base="https://blog.tsekinovsky.me/posts/system-design-distributed-systems-consepts/"><![CDATA[<p>This document contains some notes that I took while studying <a href="https://www.educative.io/module/lOn30BIA1wV52NDAg/10370001/4527677663084544">educative.io course</a></p>

<h1 id="distributed-systems">Distributed Systems</h1>

<p><strong>Vertical scaling</strong> refers to the approach of scaling a system by adding resources (memory, CPU, disk, etc.) to a single node. Meanwhile, <strong>horizontal scaling</strong> refers to the approach of scaling by adding more nodes to the system.</p>

<h1 id="scalability">Scalability</h1>

<blockquote>
  <p>Scalability lets us store and process datasets much larger than what we could with a single machine.</p>
</blockquote>

<h2 id="partitioning">Partitioning</h2>

<blockquote>
  <p>Partitioning is the process of splitting a dataset into multiple, smaller datasets, and then assigning the responsibility of storing and processing them to different nodes of a distributed system. This allows us to add more nodes to our system and increase the size of the data it can handle.</p>
</blockquote>

<ol>
  <li>Vertical Partitioning</li>
  <li>Horizontal partitioning (<strong>Sharding</strong>)</li>
</ol>

<p><img src="/assets/Pasted%20image%2020230113144612.png" alt="" width="400" /></p>

<p>In a <strong>vertically partitioned system</strong>, requests that need to combine data from different tables (i.e., join operations) become less efficient. This is because these requests may now have to access data from multiple nodes.</p>

<p>In a <strong>horizontally partitioned system</strong>, we can usually avoid accessing data from multiple nodes because all the data for each row is located in the same node. However, we may still need to access data from multiple nodes for requests that are searching for a range of rows that belong to multiple nodes.
Another important implication of horizontal partitioning is the potential for loss of transactional semantics.</p>

<p>There are a lot of different algorithms we can use to perform horizontal partitioning.</p>

<h3 id="range-partitioning">Range partitioning</h3>

<p><strong>Range partitioning</strong> is a technique where we split a dataset into ranges according to the value of a specific attribute. We then store each range in a separate node.</p>

<p><img src="/assets/Pasted%20image%2020230113145045.png" alt="" width="400" /></p>

<h3 id="hash-partitioning">Hash partitioning</h3>

<p><strong>Hash partitioning</strong> is a technique where we apply a hash function to a specific attribute of each row. This results in a number that determines which partition—and, thus, node—this row belongs to.</p>

<h3 id="consistent-hashing">Consistent hashing</h3>

<p><strong>Consistent hashing</strong> is a partitioning technique that is very similar to hash partitioning, but solves the increased data movement problem caused by hash partitioning.</p>

<p><img src="/assets/Pasted%20image%2020230113145631.png" alt="" width="600" /></p>

<blockquote>
  <p>For further discussion on this concept, feel free to read the Dynamo paper. Another widely-used system that uses consistent hashing is Apache Cassandra.</p>
</blockquote>

<h1 id="availability">Availability</h1>

<p>Availability refers to the ability of the system to remain functional despite failures in parts of it.</p>

<h2 id="replication">Replication</h2>

<p>Replication is the main technique used in distributed systems to increase availability. It consists of storing the same piece of data in multiple nodes (called replicas) so that if one of them crashes, data is not lost, and requests can be served from the other nodes in the meanwhile.</p>

<h3 id="pessimistic-replication">Pessimistic replication</h3>

<p><strong>Pessimistic replication</strong> tries to guarantee from the beginning that all the replicas are identical to each other—as if there was only one copy of the data all along.</p>

<h3 id="optimistic-replication">Optimistic replication</h3>

<p><strong>Optimistic replication</strong>, or lazy replication, allows the different replicas to diverge. This guarantees that they will converge again if the system does not receive any updates, or enters a quiesced state, for a period of time.</p>

<h3 id="single-master-replication">Single-master replication</h3>

<p>Single-master replication is a technique where we designate a single node amongst the replicas as the <strong>leader</strong>, or primary, that receives all the updates.</p>

<blockquote>
  <p>This technique is also known as <strong>primary-backup replication</strong>.</p>
</blockquote>

<p><img src="/assets/Pasted image 20230113150329.png" alt="" width="600" /></p>

<h3 id="techniques-for-propagating-updates">Techniques for propagating updates</h3>

<h4 id="synchronous-replication">Synchronous replication</h4>

<p>In <strong>synchronous replication</strong>, the node replies to the client to indicate the update is complete—only after receiving acknowledgments from the other replicas that they’ve also performed the update on their local storage. This guarantees that the client is able to view the update in a subsequent read after acknowledging it, no matter which replica the client reads from.</p>

<p><img src="/assets/Pasted image 20230113150518.png" alt="" width="500" /></p>

<h4 id="asynchronous-replication">Asynchronous replication</h4>

<p>In <strong>asynchronous replication</strong>, the node replies to the client as soon as it performs the update in its local storage, without waiting for responses from the other replicas.</p>

<p><img src="/assets/Pasted image 20230113150614.png" alt="" width="500" /></p>

<h3 id="multi-master-replication">Multi-Master Replication</h3>

<p>In this technique, all replicas are equal and can accept write requests. They are also responsible for propagating the data modifications to the rest of the group.</p>

<h4 id="conflict-resolution">Conflict resolution</h4>

<p>There are many different ways to resolve conflicts, depending on the guarantees the system wants to provide.</p>

<p>An important aspect of different approaches to resolving conflicts is whether they do it <em>eagerly</em> or <em>lazily</em>.</p>
<ul>
  <li>In the <strong>eagerly</strong> case, the conflict is resolved during the write operation.</li>
  <li>In the <strong>lazily</strong> case, the write operation proceeds to maintain multiple, alternative versions of the data record that are eventually resolved to a single version later on, i.e., during a subsequent read operation.</li>
</ul>

<h3 id="quorums-in-distributed-systems">Quorums in Distributed Systems</h3>

<p>Let’s consider an example. In a system of three replicas, we can say that writes need to complete in two nodes (as a quorum of two), while reads need to retrieve data from two nodes. This way, we can be sure that the reads will read the latest value. This is because at least one of the nodes in the <em>read quorum</em> will also be included in the latest <em>write quorum</em>.</p>

<h1 id="safety-guarantors-acid">Safety guarantors (ACID)</h1>

<p><img src="/assets/Pasted image 20230116101619.png" alt="" width="400" /></p>

<h2 id="atomicity">Atomicity</h2>

<p>It is challenging to achieve atomicity in a distributed system because of the possibility of <strong>partial failures</strong>.
<strong>Atomicity</strong> guarantees that a transaction that comprises multiple operations is treated as a single unit. This means that either <em>all</em> operations of the transaction are executed, or <em>none</em> of them is.</p>

<h2 id="consistency">Consistency</h2>

<p>It is challenging to achieve consistency because of the <strong>network asynchrony</strong>. Network asynchrony occurs when different nodes in a network have different values for the current time. The following illustration shows this.
<strong>Consistency</strong> guarantees that a transaction only transitions the database from one valid state to another valid state, while maintaining any database invariants.</p>

<h2 id="isolation">Isolation</h2>

<p>It is challenging to achieve isolation because of the inherent concurrency of distributed systems.
<strong>Isolation</strong> guarantees that even though transactions might run concurrently and have data dependencies, the result is as if one of them was executed at a time and there was no interference between them.</p>

<h2 id="durability">Durability</h2>

<p><strong>Durability</strong> guarantees that once a transaction is committed, it remains committed even in the case of failure.
In the context of single-node, centralized systems, this usually means that completed transactions and their effects are recorded in non-volatile storage.</p>

<h2 id="cap-theorem">CAP Theorem</h2>

<p>According to the initial statement of the CAP theorem, it is impossible for a distributed data store to provide more than two of the following properties simultaneously: <strong>consistency</strong>, <strong>availability</strong>, and <strong>partition tolerance</strong>.</p>

<blockquote>
  <p>a distributed system can be either <em>consistent</em> or <em>available</em> in the presence of a network partition.</p>
</blockquote>

<blockquote>
  <p>“In the case of a <em>network partition</em> (P), the system has to choose between <em>availability</em> (A) and <em>consistency</em> (C) but <em>else</em> (E), when the system operates normally in the absence of network partitions, the system has to choose between <em>latency</em> (L) and <em>consistency</em> (C).”</p>
</blockquote>

<h3 id="proof">Proof</h3>

<p><img src="/assets/Pasted image 20230116103259.png" alt="" width="400" /></p>

<p>Now, let’s assume that there is a network failure that results in a network partition between the two nodes of the system at some point. A user of the system performs a write, and then a read—even two different users may perform these operations.</p>

<p>In that case, the system has two options:</p>
<ul>
  <li>It can fail one of the operations, and break the <em>availability</em> property.</li>
  <li>It can process both the operations, which will return a stale value from the read and break the <em>consistency</em> property.</li>
</ul>

<h2 id="consistency-model">Consistency Model</h2>

<p>The consistency model defines the set of execution histories that are valid in a system.</p>

<h3 id="strong-consistency-model">Strong consistency model</h3>

<p>The consistency model defines the set of execution histories that are valid in a system.</p>

<p>Usually, the stronger the consistency model a system satisfies, the easier it is to build an application on top of it. This is because the developer can rely on stricter guarantees.</p>

<h3 id="list-of-consistency-models">List of consistency models</h3>

<ul>
  <li>Linearizability
    <ul>
      <li>operations appear to be instantaneous to the external client.</li>
      <li>The <strong>non-linearizability</strong> comes from the use of <em>asynchronous replication</em>.</li>
      <li>When we use a <em>synchronous replication</em> technique, we make the system linearizable.</li>
    </ul>
  </li>
  <li>Sequential Consistency
    <ul>
      <li><strong>Sequential consistency</strong> is a weaker consistency model, where operations are allowed to take effect before their invocation or after their completion. As a result, it provides no real-time guarantees. However, operations from different clients have to be seen in the same order by all other clients, and operations of every single client preserve the order specified by its program (in this global order).</li>
    </ul>
  </li>
  <li>Causal Consistency
    <ul>
      <li>In some cases, we don’t need to preserve the ordering specified by each client’s program—as long as causally related operations are displayed in the right order. This is the <strong>causal consistency</strong> model, which requires that only operations that are causally related need to be seen in the same order by all the nodes.</li>
    </ul>
  </li>
  <li>Eventual Consistency
    <ul>
      <li>There are still even simpler applications that do not have the notion of a cause-and-effect and require an even simpler consistency model. The <strong>eventual consistency</strong> model is beneficial here.</li>
    </ul>
  </li>
</ul>

<h2 id="isolation-levels-and-anomalies">Isolation Levels and Anomalies</h2>

<p>There is still a need for some formal models that define what is possible and what is not in a system’s behavior. These are called <strong>isolation levels</strong></p>

<ul>
  <li><strong>Serializability:</strong> It essentially states that two transactions, when executed concurrently, should give the same result as though executed sequentially.</li>
  <li><strong>Repeatable read:</strong> It ensures that the data once read by a transaction will not change throughout its course.</li>
  <li><strong>Snapshot isolation:</strong> It guarantees that all reads made in a transaction see a consistent snapshot of the database from the point it started and till the transaction commits successfully if no other transaction has updated the same data since that snapshot.</li>
  <li><strong>Read committed:</strong> It does not allow transactions to read data that has not yet been committed by another transaction.</li>
  <li><strong>Read uncommitted:</strong> It is the lowest isolation level and allows the transaction to read uncommitted data by other transactions.</li>
</ul>

<h3 id="anomaly-dirty-write">Anomaly: Dirty write</h3>

<p>A <strong>dirty write</strong> occurs when a transaction overwrites a value that was previously written by another transaction that is still in-flight and has not been committed yet.</p>

<h3 id="anomaly-dirty-read">Anomaly: Dirty read</h3>

<p>A <strong>dirty read</strong> occurs when a transaction reads a value that has been written by another transaction that has not yet been committed.</p>

<h3 id="anomaly-fuzzy-or-non-repeatable-read">Anomaly: Fuzzy or non-repeatable read</h3>

<p>A <strong>fuzzy or non-repeatable read</strong> occurs when a value is retrieved twice during a transaction (without it being updated in the same transaction), and the value is different.</p>

<h3 id="anomaly-phantom-read">Anomaly: Phantom read</h3>

<p>A <strong>phantom read</strong> occurs when a transaction does a predicate-based read, and another transaction writes or removes a data item matched by that predicate while the first transaction is still in flight. If that happens, then the first transaction might be acting again on stale data or inconsistent data.</p>

<h3 id="anomaly-lost-update">Anomaly: Lost update</h3>

<p>A <strong>lost update</strong> occurs when two transactions read the same value and then try to update it to two different values. The end result is that one of the two updates survives, but the process executing the other update is not informed that its update did not take effect. Thus it is called a lost update.</p>

<h3 id="anomaly-read-skew">Anomaly: Read skew</h3>

<p>A <strong>read skew</strong> occurs when there are integrity constraints between two data items that seem to be violated because a transaction can only see partial results of another transaction.</p>

<p><img src="/assets/Pasted image 20230116112650.png" alt="" width="400" /></p>

<h3 id="anomaly-write-skew">Anomaly: Write skew</h3>

<p>A <strong>write skew</strong> occurs when two transactions read the same data, but then modify disjoint sets of data.</p>

<p><img src="/assets/Pasted image 20230116112923.png" alt="" width="400" /></p>

<p><img src="/assets/Pasted image 20230116120348.png" alt="" /></p>

<h2 id="models">Models</h2>

<p><img src="/assets/Pasted image 20230116120900.png" alt="" /></p>]]></content><author><name></name></author><category term="system-design" /><category term="cs" /><category term="system-design" /><category term="notes" /><summary type="html"><![CDATA[Collection of notes related to design of distributed software systems]]></summary></entry><entry><title type="html">Garage door opener with Home Assistant</title><link href="https://blog.tsekinovsky.me/posts/homeassistant-garage-opener/" rel="alternate" type="text/html" title="Garage door opener with Home Assistant" /><published>2023-01-11T00:00:00-06:00</published><updated>2023-01-11T00:00:00-06:00</updated><id>https://blog.tsekinovsky.me/posts/homeassistant-garage-opener</id><content type="html" xml:base="https://blog.tsekinovsky.me/posts/homeassistant-garage-opener/"><![CDATA[<h1 id="problem-definition">Problem definition</h1>

<p>Recently I got a new interest - home automation. This is very broad topic that could require a whole book or a web site. Here I’d like to tell you only the story of automating my garage door.</p>

<p>I had the following requirement from this project:</p>
<ul>
  <li>Add ability to open my garage with the phone. Don’t like old remotes that I can forget.</li>
  <li>Ability to perform automations like open garage when my car arrives and automatically close it when it’s left open</li>
  <li>It should be cheep and fun</li>
</ul>

<h1 id="research">Research</h1>

<p>First step was to search for existing solutions and I found really good sources:</p>
<ul>
  <li><a href="https://savjee.be/blog/make-garage-door-opener-smart-shelly-esphome-home-assistant/">Make Your Garage Door Opener Smart</a></li>
  <li><a href="https://leonardosmarthomemakers.com/how-to-create-a-garage-door-opener-in-home-assistant/">How to create a Garage Door Opener in Home Assistant</a>
So my project was based on these materials.</li>
</ul>

<p>I found out that:</p>
<ol>
  <li><a href="https://www.home-assistant.io/">Home Assistant</a> is the great platform for home automation and I decided to use it as a main controller</li>
  <li>The cheapest and easiest way to run home assistant is on Raspberry Pi. Plus I already have Raspberry Pi with 12 inch touch screen. I’ll use it for this project and for all following home automation endeavors</li>
  <li>Door opener switch could be by Sonoff or Shelly. I decided to go with <a href="https://www.amazon.com/Shelly-Wireless-Automation-Android-Application/dp/B07NQNLDTD/ref=sr_1_2_sspa?keywords=shelly+1&amp;qid=1673483956&amp;sprefix=%2Caps%2C100&amp;sr=8-2-spons&amp;psc=1&amp;spLa=ZW5jcnlwdGVkUXVhbGlmaWVyPUExTlM4RzAzVUYyTzQ1JmVuY3J5cHRlZElkPUEwOTA0NzQyMjZQRlIzN1dOVkE0OCZlbmNyeXB0ZWRBZElkPUEwMjcxODU5SUJIVVRUWTRURlBXJndpZGdldE5hbWU9c3BfYXRmJmFjdGlvbj1jbGlja1JlZGlyZWN0JmRvTm90TG9nQ2xpY2s9dHJ1ZQ==">Shelly 1</a> for 19$</li>
  <li>There is wide range of door sensors, I thought to buy wireless (Zigbee) ones and stopped on <a href="https://www.amazon.com/gp/product/B07D37VDM3/ref=ppx_yo_dt_b_asin_title_o00_s00?ie=UTF8&amp;psc=1">Aqara Door and Window Sensor</a> for 18$</li>
</ol>

<h1 id="assembly">Assembly</h1>

<h2 id="switch">Switch</h2>

<p>Installation didn’t take a lot of time. It looks like:
<img src="/assets/Pasted image 20230118164301.png" alt="" /></p>

<p>After Shelly 1 installation, a new WiFi network <code class="language-plaintext highlighter-rouge">shelly-&lt;id&gt;</code> is available that you can connect and configure the device by opening URL http://192.168.33.1
I configured WiFi network on the device to use my home network and found new device in home assistant</p>

<h2 id="sensors">Sensors</h2>

<p>Installation of these sensors where very easy:</p>

<ol>
  <li>Open the box</li>
  <li>Press button for 3 seconds and wait for blinking blue light</li>
  <li>Open Home assistant and open <code class="language-plaintext highlighter-rouge">ConBee II</code> -&gt; <code class="language-plaintext highlighter-rouge">devices</code></li>
  <li>Click on “Add Device” button</li>
  <li>Attach sensors to the garage door</li>
</ol>

<p><img src="/assets/Pasted image 20230114213212.png" alt="" width="500" />
<img src="/assets/Pasted image 20230114213307.png" alt="" /></p>

<h1 id="home-assistant">Home Assistant</h1>

<h2 id="setup">Setup</h2>

<p>I setup home assistant on RaspberryPi according to instructions from  https://www.home-assistant.io/installation/raspberrypi/</p>

<p>In addition to the HA core I installed</p>
<ul>
  <li><a href="https://community.home-assistant.io/t/home-assistant-community-add-on-node-red/55023">Red Node AddOn</a>. I use it to create logic, flows in the home assistant.</li>
  <li><a href="https://www.home-assistant.io/integrations/mqtt/">Mosquitto broker</a> for MQTT protocol communication</li>
</ul>

<p>Main dashboard looks like:</p>

<p><img src="/assets/Pasted image 20230126194144.png" alt="" /></p>

<h2 id="automations">Automations</h2>

<p>First I notice that when I enable the switch one time it disable the button in the garage that opens the door. It requires to toggle the Shelly switch one more time to enable the button on a wall.
So, I decided to create a button on main dashboard that toggle the switch twice with 1/2 second delay. In order to create the button I added helper button:
<img src="/assets/Pasted image 20230126193331.png" alt="" /></p>

<p>The flow in Node Red looks like:</p>

<p><img src="/assets/Pasted image 20230126193951.png" alt="" /></p>

<ol>
  <li>Event:state node “Button was pressed” is associated with the created button</li>
  <li>Call service node “Toggle garage door”
    <ul>
      <li>Domain: switch</li>
      <li>Service: toggle</li>
      <li>Device: &lt; garage door switch &gt;</li>
      <li>Entity: &lt; switch.garage_opener &gt;</li>
      <li>Data: on</li>
    </ul>
  </li>
  <li>Wait until node “Wait 1/2 second” wait 0.5 seconds and then</li>
  <li>Call service node “Second switch” is copy of node #2</li>
</ol>

<p>Second automation that I decided to create is inception of security system.</p>

<ol>
  <li>I created Helper Toggle switch in HA</li>
  <li>Created flow that checks if the toggle is on and garage door got opened - i get the email</li>
</ol>

<p>The flow looks like</p>

<p><img src="/assets/Pasted image 20230126194438.png" alt="" /></p>

<ol>
  <li>evant:state node “Garage door got opened” monitors if sensor detects open door</li>
  <li>current state “Alarm system enabled” retrieves value of <code class="language-plaintext highlighter-rouge">input_boolean.enable_security</code> (the toggle that I created before)</li>
  <li>Switch “Is On” checks that value that we retrieved from previous step is <code class="language-plaintext highlighter-rouge">on</code></li>
  <li>send email node send my an email…</li>
</ol>

<h1 id="conclusion">Conclusion</h1>

<p>Not bad solution for under <code class="language-plaintext highlighter-rouge">40$</code>. Well, if we take into account also Raspberry Pi than whole project could cost bellow <code class="language-plaintext highlighter-rouge">200$</code>. However, I can imagine realm of possibility in home automation field based on single Home Assistant platform.</p>

<p>Also I decided to buy subscription https://www.home-assistant.io/cloud/ <code class="language-plaintext highlighter-rouge">65$</code> / year; it allows me to expose my home assistant to the internet. As a result I can use Home Assistant application on my phone anywhere:</p>

<p><img src="/assets/Screenshot 2023-01-26 at 7.55.58 PM.jpeg" alt="" width="300" /></p>]]></content><author><name></name></author><category term="smarthome" /><category term="smarthome" /><category term="home-assistant" /><summary type="html"><![CDATA[Garage door opener with Shelly switch, sensors and Home Assistant]]></summary></entry><entry><title type="html">Blog with GitHub Pages and Jekyll</title><link href="https://blog.tsekinovsky.me/posts/setup-personalized-blog-with-jekyll/" rel="alternate" type="text/html" title="Blog with GitHub Pages and Jekyll" /><published>2023-01-10T00:00:00-06:00</published><updated>2025-11-29T05:44:01-06:00</updated><id>https://blog.tsekinovsky.me/posts/setup-personalized-blog-with-jekyll</id><content type="html" xml:base="https://blog.tsekinovsky.me/posts/setup-personalized-blog-with-jekyll/"><![CDATA[<h1 id="introduction">Introduction</h1>

<p>Though it’s very controversial statement, I believe, we all should have a place in the ocean of the Internet. After 
some contemplation period I came to a conclusion that I need:</p>
<ol>
  <li>Personalized domain name</li>
  <li>Personalized email address</li>
  <li>Blog to share ideas</li>
</ol>

<p>As of points 1 and 2, I registered the domain with <a href="https://account.godaddy.com/products">GoDaddy</a> and bought E-Mail 
service for 5$ a month. Also, I’ve created and registered a new user in the email.</p>

<p>The issue was to connect the email server on my MacOS. However, it was an easy process by selecting 
<code class="language-plaintext highlighter-rouge">System  Preferences</code>-&gt;<code class="language-plaintext highlighter-rouge">Internet Accounts</code>-&gt;<code class="language-plaintext highlighter-rouge">Microsoft Echange</code>. Login with your new user credentials</p>

<p>So the only one problem with my idea was personalized blog. I had several requirements for the blog:</p>
<ol>
  <li>Fully customizable</li>
  <li>Easy for editing</li>
  <li>Easy to add code snippets</li>
  <li>Source safe</li>
</ol>

<p>As you can understand regular blogs by Google or by life journal didn’t work for me. Since I’m software developer I’m used 
to Markup language that is used in Confluence, Wiki and some other tools like <a href="https://obsidian.md/">Obsidian</a>. 
As a result, I came to a conclusion that Markup blog with its content in source control like github is the best approach.</p>

<p>Apparently GitHub already provides a service of hosting static pages - <a href="https://pages.github.com/">GitHub Pages</a>.</p>

<p>The following post is dedicated to instructions of setting up the blog. This post is actually a first post of the blog.</p>

<h1 id="creating-blog">Creating Blog</h1>

<p>These instructions were created for MacOs</p>

<h2 id="install-software">Install Software</h2>

<h3 id="install-homebrew">Install Homebrew</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>/bin/bash <span class="nt">-c</span> <span class="s2">"</span><span class="si">$(</span>curl <span class="nt">-fsSL</span> https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh<span class="si">)</span><span class="s2">"</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="install-chruby-and-the-latest-ruby-with-ruby-install">Install chruby and the latest Ruby with ruby-install</h3>

<p>Install chruby and ruby-install with Homebrew:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>brew <span class="nb">install </span>chruby ruby-install xz
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Install the latest stable version of Ruby (supported by <a href="https://jekyllrb.com/">Jekyll</a>):</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>ruby-install ruby 3.1.3
</pre></td></tr></tbody></table></code></pre></div></div>

<p>This operation took some time… So be patient</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="nb">echo</span> <span class="s2">"source </span><span class="si">$(</span>brew <span class="nt">--prefix</span><span class="si">)</span><span class="s2">/opt/chruby/share/chruby/chruby.sh"</span> <span class="o">&gt;&gt;</span> ~/.zshrc
<span class="nb">echo</span> <span class="s2">"source </span><span class="si">$(</span>brew <span class="nt">--prefix</span><span class="si">)</span><span class="s2">/opt/chruby/share/chruby/auto.sh"</span> <span class="o">&gt;&gt;</span> ~/.zshrc
<span class="nb">echo</span> <span class="s2">"chruby ruby-3.1.3"</span> <span class="o">&gt;&gt;</span> ~/.zshrc <span class="c"># run 'chruby' to see actual version</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="install-jekyll">Install Jekyll</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>gem <span class="nb">install </span>jekyll bundler
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="configure-github">Configure Github</h2>

<h3 id="create-new-repository">Create new repository</h3>

<p><img src="/assets/github-new-repo.png" alt="add new repository" width="200" /></p>

<p>Give a name to the repository like <code class="language-plaintext highlighter-rouge">&lt;github-user-name&gt;.github.io</code></p>

<h3 id="create-2-branches">Create 2 branches</h3>
<ul>
  <li>main</li>
  <li>gh-pages</li>
</ul>

<h2 id="build-blog-with-jekyll">Build Blog with Jekyll</h2>

<h3 id="clone-repository">Clone repository</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>git clone https://github.com/&lt;user-name&gt;/&lt;user-name&gt;.github.io.git
<span class="nb">cd</span> &lt;user-name&gt;.github.io
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="jekyll-setup">Jekyll setup</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>jekyll new <span class="nt">--skip-bundle</span> <span class="nb">.</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>It will create default version of the blog. I did several changes and my project looks like:
<img src="/assets/jekyll-project.png" alt="jekyll project" width="300" /></p>

<h4 id="theme-selection">Theme selection</h4>
<p>I didn’t like the <code class="language-plaintext highlighter-rouge">minima</code> theme provided out of the box, so I was looking for a prettier design. 
I decided to use theme <code class="language-plaintext highlighter-rouge">jekyll-theme-tao</code>. To do that:</p>

<p>Change <code class="language-plaintext highlighter-rouge">_config.yml</code></p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="c1"># Build settings</span>
<span class="na">theme</span><span class="pi">:</span> <span class="s">jekyll-theme-tao</span>
<span class="c1"># _plugins:</span>
<span class="c1">#  - jekyll-remote-theme</span>
<span class="c1">#  - jekyll-feed</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Change <code class="language-plaintext highlighter-rouge">Gemfile</code></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>...
gem <span class="s2">"jekyll-theme-tao"</span>
...
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="github-action">GitHub Action</h3>

<p>GitHub provides an “actions” functionality, that allows to execute a build/task in a docker container. We are going to 
write a workflow that builds the site, merges the changes to <code class="language-plaintext highlighter-rouge">gh-pages</code> branch, and deploy the site to GitHub pages.</p>

<p>But before that ensure that in your repository -&gt; <code class="language-plaintext highlighter-rouge">Settings</code> <code class="language-plaintext highlighter-rouge">gh-pages</code> branch is selected:
<img src="/assets/gh-pages-branch.png" alt="gh-pages branch" width="500" /></p>

<p>Create file <code class="language-plaintext highlighter-rouge">./github/workflows/github-pages.yml</code> with content:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
</pre></td><td class="rouge-code"><pre><span class="na">name</span><span class="pi">:</span> <span class="s">Build and deploy Jekyll site to GitHub Pages</span>

<span class="na">on</span><span class="pi">:</span>
  <span class="na">push</span><span class="pi">:</span>
    <span class="na">branches</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">main</span>

<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">github-pages</span><span class="pi">:</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/checkout@v3</span>
      <span class="pi">-</span> <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/cache@v3</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">path</span><span class="pi">:</span> <span class="s">vendor/bundle</span>
          <span class="na">key</span><span class="pi">:</span> <span class="s">${{ runner.os }}-gems-${{ hashFiles('**/Gemfile.lock') }}</span>
          <span class="na">restore-keys</span><span class="pi">:</span> <span class="pi">|</span>
            <span class="s">${{ runner.os }}-gems-</span>
      <span class="pi">-</span> <span class="na">uses</span><span class="pi">:</span> <span class="s">jeffreytse/jekyll-deploy-action@v0.4.0</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">provider</span><span class="pi">:</span> <span class="s1">'</span><span class="s">github'</span>
          <span class="na">token</span><span class="pi">:</span> <span class="s">${{ secrets.JEKYLL_PAT }}</span> <span class="c1"># It's your Personal Access Token(PAT)</span>
          <span class="na">repository</span><span class="pi">:</span> <span class="s1">'</span><span class="s">'</span>             <span class="c1"># Default is current repository</span>
          <span class="na">branch</span><span class="pi">:</span> <span class="s1">'</span><span class="s">gh-pages'</span>         <span class="c1"># Default is gh-pages for github provider</span>
          <span class="na">jekyll_src</span><span class="pi">:</span> <span class="s1">'</span><span class="s">./'</span>           <span class="c1"># Default is root directory</span>
          <span class="na">jekyll_cfg</span><span class="pi">:</span> <span class="s1">'</span><span class="s">_config.yml'</span>  <span class="c1"># Default is _config.yml</span>
          <span class="na">jekyll_baseurl</span><span class="pi">:</span> <span class="s1">'</span><span class="s">'</span>         <span class="c1"># Default is according to _config.yml</span>
          <span class="na">bundler_ver</span><span class="pi">:</span> <span class="s1">'</span><span class="s">&gt;=0'</span>         <span class="c1"># Default is latest bundler version</span>
          <span class="na">cname</span><span class="pi">:</span> <span class="s1">'</span><span class="s">'</span>                  <span class="c1"># Default is to not use a cname</span>
          <span class="na">actor</span><span class="pi">:</span> <span class="s1">'</span><span class="s">'</span>                  <span class="c1"># Default is the GITHUB_ACTOR</span>
          <span class="na">pre_build_commands</span><span class="pi">:</span> <span class="s1">'</span><span class="s">'</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="commit-directory-to-the-main-branch">Commit directory to the main branch</h3>

<p>The workflow will detect the changes, pick it up, merge changes to the <code class="language-plaintext highlighter-rouge">gh-pages</code> branch and will deploy the site.</p>

<p>Now the blog is available by URL: <code class="language-plaintext highlighter-rouge">https://&lt;user-name&gt;.github.io</code></p>

<h3 id="configure-blog-with-custom-dns">Configure blog with custom DNS</h3>

<h4 id="create-cname-in-godaddy">Create CNAME in GoDaddy</h4>

<ul>
  <li>Type: CNAME</li>
  <li>Name: blog</li>
  <li>Data: t-boris.github.io.</li>
</ul>

<p><img src="/assets/godaddy-cname.png" alt="godaddy cname" /></p>

<h4 id="configure-custom-domain-in-github">Configure custom domain in GitHub</h4>

<p><img src="/assets/gh-custom-domain.png" alt="custom domain" /></p>

<p>Now each time I’ll add Markup file to <code class="language-plaintext highlighter-rouge">_posts</code> directory the site will be updated, and it’s available by custom DNS.</p>

<p>Full code of the blog is available by URL <a href="https://github.com/t-boris/t-boris.github.io">https://github.com/t-boris/t-boris.github.io</a></p>]]></content><author><name></name></author><category term="config" /><category term="github" /><category term="jekyll" /><category term="workflow" /><summary type="html"><![CDATA[In this article I show how to set up a blog using GitHub Pages and Jekyll tool]]></summary></entry></feed>