# Repository Guidelines

## Project Structure & Module Organization
- `_config.yml` holds global Jekyll/Chirpy settings; tweak site metadata and collections here first.
- `_data/` stores shared data, including `events.json` generated by the events pipeline plus CDN/social configs under `assets/`, `contact.yml`, and `locales/`.
- `_includes/` and `_layouts/` override theme fragments (custom head/sidebar/home). Reuse these before adding new layouts.
- Content lives in `_posts/` (`YYYY-MM-DD-title.md`), `_tabs/` for nav pages, and `assets/` for images/favicons. `_site/` is build output-never edit or commit.
- Automation scripts sit in `scripts/` (see `fetch_events.py` and `requirements.txt`); config for them is under `config/`.

## Build, Test, and Development Commands
- `bundle install` - install Ruby deps.
- `bundle exec jekyll serve --livereload` - local dev at http://127.0.0.1:4000 with auto-reload.
- `bundle exec jekyll build` - production-like build used by CI (sets `_site/`).
- `bundle exec jekyll doctor` - quick sanity check for config/URL issues.
- Events data: `python -m pip install -r scripts/requirements.txt` then `XAI_API_KEY=... python scripts/fetch_events.py` to refresh `_data/events.json` before a deploy.

## Coding Style & Naming Conventions
- Use 2-space indent in YAML/Liquid; keep Liquid filters consistent with existing layouts.
- Posts require front matter (`layout`, `title`, `date`, `categories`, `tags`; optional `pin`, `hidden`, `excerpt`, `image`, `math`, `mermaid`).
- Filenames: posts `YYYY-MM-DD-title.md`; tabs lower-case with dashes; assets lower-case/dash-separated. Avoid spaces and uppercase.
- Do not commit `_site/`, `.jekyll-cache/`, `vendor/`, or local env artifacts.

## Testing Guidelines
- Run `bundle exec jekyll build` before opening a PR; treat warnings as blockers.
- Smoke-test `bundle exec jekyll serve` to confirm nav tabs, post metadata, and RSS/SEO tags render correctly.
- If you touch data, validate `_data/events.json` is valid JSON and dates stay ISO (`YYYY-MM-DD`); keep generated archives under `_event_archives/` in sync when scripting changes.

## Commit & Pull Request Guidelines
- Commit messages are short, imperative summaries (e.g., "Restore back-to-top button", "Update local events data - 2025-11-04"); group related edits together.
- PRs should describe intent, key files touched, and local build results; include screenshots/gifs for layout or styling changes.
- Link issues when relevant and note any impact on GitHub Actions workflows (deploy or events generation).

## Security & Configuration Tips
- Keep secrets out of commits; set `XAI_API_KEY` and analytics tokens via environment variables or GitHub Secrets only.
- Review `config/events.json` and `_config.yml` for accidental credentials before pushing; prefer `.env` files locally that stay untracked.
